<!--
  Project Specification Template
  ==============================

  This is a placeholder template. Replace with your actual project specification.

  You can either:
  1. Use the /create-spec command to generate this interactively with Claude
  2. Manually edit this file following the structure below

  See existing projects in generations/ for examples of complete specifications.
-->

<project_specification>
  <project_name>YOUR_PROJECT_NAME</project_name>

  <overview>
    Describe your project in 2-3 sentences. What are you building? What problem
    does it solve? Who is it for? Include key features and design goals.
  </overview>

  <technology_stack>
    <frontend>
      <framework>React with Vite</framework>
      <styling>Tailwind CSS</styling>
      <state_management>React hooks and context</state_management>
      <routing>React Router for navigation</routing>
      <port>5173</port>
    </frontend>
    <backend>
      <runtime>Convex (reactive backend)</runtime>
      <database>Convex document database</database>
      <realtime>WebSocket subscriptions (automatic)</realtime>
      <helpers>convex-helpers (npm)</helpers>
    </backend>
    <communication>
      <api>Convex queries, mutations, and actions</api>
      <http>HTTP routes via convex/http.ts (optional)</http>
    </communication>
  </technology_stack>

  <convex_architecture>
    <patterns>
      <schema>defineSchema, defineTable with v.* validators</schema>
      <queries>Pure functions, indexed reads, .collect() for small sets</queries>
      <mutations>Transactional writes with argument validators</mutations>
      <actions>External API calls (LLMs, email, third-party services)</actions>
    </patterns>
    <helpers>
      <rate_limiting>rateLimitTables from convex-helpers</rate_limiting>
      <crud>Auto-generated CRUD utilities</crud>
      <rls>Row-level security for access control</rls>
      <sessions>Client-generated session IDs</sessions>
    </helpers>
    <project_structure>
      convex/
        _generated/          - Auto-generated types (do not edit)
        schema.ts            - Table definitions with validators
        domain/              - Domain-specific queries/mutations
        lib/                 - Shared utilities (RLS, CRUD, helpers)
        http.ts              - HTTP routes (optional)
      src/
        main.tsx             - ConvexProvider setup
        components/          - React components with useQuery/useMutation
      .env.local             - VITE_CONVEX_URL (auto-generated)
      package.json           - convex, convex-helpers dependencies
    </project_structure>
  </convex_architecture>

  <prerequisites>
    <environment_setup>
      - Node.js 18+ installed
      - npm or pnpm package manager
      - Convex account (free at convex.dev)
      - Any API keys or external services needed
    </environment_setup>
  </prerequisites>

  <core_features>
    <!--
      List features grouped by category. Each feature should be:
      - Specific and testable
      - Independent where possible
      - Written as a capability ("User can...", "System displays...")
    -->

    <authentication>
      - User registration with email/password
      - User login with session management
      - User logout
      - Password reset flow
      - Profile management
    </authentication>

    <main_functionality>
      <!-- Replace with your app's primary features -->
      - Create new items
      - View list of items with pagination
      - Edit existing items
      - Delete items with confirmation
      - Search and filter items
    </main_functionality>

    <user_interface>
      - Responsive layout (mobile, tablet, desktop)
      - Dark/light theme toggle
      - Loading states and skeletons
      - Error handling with user feedback
      - Toast notifications for actions
    </user_interface>

    <data_management>
      - Data validation on forms
      - Auto-save drafts
      - Export data functionality
      - Import data functionality
    </data_management>

    <!-- Add more feature categories as needed -->
  </core_features>

  <database_schema>
    <!--
      Convex uses TypeScript schema definitions in convex/schema.ts
      Tables are defined using defineTable with v.* validators
    -->
    <convex_schema>
      users: defineTable({
        email: v.string(),
        name: v.optional(v.string()),
        avatarUrl: v.optional(v.string()),
        preferences: v.optional(v.any()),
        status: v.union(v.literal("active"), v.literal("inactive")),
      })
        .index("by_email", ["email"])

      items: defineTable({
        userId: v.id("users"),
        title: v.string(),
        description: v.optional(v.string()),
        status: v.union(v.literal("draft"), v.literal("active"), v.literal("archived")),
      })
        .index("by_user", ["userId"])
        .index("by_status", ["status"])

      <!-- Add more tables for your domain entities -->
    </convex_schema>
  </database_schema>

  <convex_functions>
    <!--
      Convex functions are TypeScript files in convex/ folder
      Exported functions become API endpoints automatically
    -->
    <auth>
      <!-- Use Better Auth or custom auth component -->
      - queries: getCurrentUser, getUserById
      - mutations: updateProfile, deleteAccount
      - actions: sendPasswordReset, verifyEmail
    </auth>

    <items>
      - queries: list (paginated), getById, search
      - mutations: create, update, delete
      - internal: scheduled cleanup (cron)
    </items>

    <!-- Add more function groups as needed -->
  </api_endpoints_summary>

  <ui_layout>
    <main_structure>
      Describe the overall layout structure:
      - Header with navigation and user menu
      - Sidebar for navigation (collapsible on mobile)
      - Main content area
      - Footer (optional)
    </main_structure>

    <sidebar>
      - Logo/brand at top
      - Navigation links
      - Quick actions
      - User profile at bottom
    </sidebar>

    <main_content>
      - Page header with title and actions
      - Content area with cards/lists/forms
      - Pagination or infinite scroll
    </main_content>

    <modals_overlays>
      - Confirmation dialogs
      - Form modals for create/edit
      - Settings modal
      - Help/keyboard shortcuts reference
    </modals_overlays>
  </ui_layout>

  <design_system>
    <color_palette>
      - Primary: #3B82F6 (blue)
      - Secondary: #10B981 (green)
      - Accent: #F59E0B (amber)
      - Background: #FFFFFF (light), #1A1A1A (dark)
      - Surface: #F5F5F5 (light), #2A2A2A (dark)
      - Text: #1F2937 (light), #E5E5E5 (dark)
      - Border: #E5E5E5 (light), #404040 (dark)
      - Error: #EF4444
      - Success: #10B981
      - Warning: #F59E0B
    </color_palette>

    <typography>
      - Font family: Inter, system-ui, -apple-system, sans-serif
      - Headings: font-semibold
      - Body: font-normal, leading-relaxed
      - Code: JetBrains Mono, Consolas, monospace
    </typography>

    <components>
      <buttons>
        - Primary: colored background, white text, rounded
        - Secondary: border style, hover fill
        - Ghost: transparent, hover background
        - Icon buttons: square with hover state
      </buttons>

      <inputs>
        - Rounded borders with focus ring
        - Clear placeholder text
        - Error states with red border
        - Disabled state styling
      </inputs>

      <cards>
        - Subtle border or shadow
        - Rounded corners (8px)
        - Hover state for interactive cards
      </cards>
    </components>

    <animations>
      - Smooth transitions (150-300ms)
      - Fade in for new content
      - Slide animations for modals/sidebars
      - Loading spinners
      - Skeleton loaders
    </animations>
  </design_system>

  <key_interactions>
    <!-- Describe the main user flows -->
    <user_flow_1>
      1. User arrives at landing page
      2. Clicks "Get Started" or "Sign Up"
      3. Fills registration form
      4. Receives confirmation
      5. Redirected to main dashboard
    </user_flow_1>

    <user_flow_2>
      1. User clicks "Create New"
      2. Form modal opens
      3. User fills in details
      4. Clicks save
      5. Item appears in list with success toast
    </user_flow_2>

    <!-- Add more key interactions as needed -->
  </key_interactions>

  <implementation_steps>
    <step number="1">
      <title>Project Setup and Database</title>
      <tasks>
        - Initialize frontend with Vite + React
        - Set up Express backend
        - Create SQLite database with schema
        - Configure CORS and middleware
        - Set up environment variables
      </tasks>
    </step>

    <step number="2">
      <title>Authentication System</title>
      <tasks>
        - Implement user registration
        - Build login/logout flow
        - Add session management
        - Create protected routes
        - Build user profile page
      </tasks>
    </step>

    <step number="3">
      <title>Core Features</title>
      <tasks>
        - Build main CRUD operations
        - Implement list views with pagination
        - Add search and filtering
        - Create form validation
        - Handle error states
      </tasks>
    </step>

    <step number="4">
      <title>UI Polish and Responsiveness</title>
      <tasks>
        - Implement responsive design
        - Add dark/light theme
        - Create loading states
        - Add animations and transitions
        - Implement toast notifications
      </tasks>
    </step>

    <step number="5">
      <title>Testing and Refinement</title>
      <tasks>
        - Test all user flows
        - Fix edge cases
        - Optimize performance
        - Ensure accessibility
        - Final UI polish
      </tasks>
    </step>
  </implementation_steps>

  <success_criteria>
    <functionality>
      - All features work as specified
      - No console errors in browser
      - Proper error handling throughout
      - Data persists correctly in database
    </functionality>

    <user_experience>
      - Intuitive navigation and workflows
      - Responsive on all device sizes
      - Fast load times (< 2s)
      - Clear feedback for all actions
      - Accessible (keyboard navigation, ARIA labels)
    </user_experience>

    <technical_quality>
      - Clean, maintainable code structure
      - Consistent coding style
      - Proper separation of concerns
      - Secure authentication
      - Input validation and sanitization
    </technical_quality>

    <design_polish>
      - Consistent visual design
      - Smooth animations
      - Professional appearance
      - Both themes fully implemented
      - No layout issues or overflow
    </design_polish>
  </success_criteria>
</project_specification>
